---
import { Instagram, Facebook, Youtube } from "lucide-astro";
import { Image } from "astro:assets";
import {
  getLangFromUrl,
  useTranslations,
  getTranslatedPath,
} from "../i18n/utils";
import afroinLogo from "../assets/img/logos/afroin.png";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentYear = new Date().getFullYear();

const quickLinks = [
  { href: getTranslatedPath("/#sobre", lang), label: t("nav.about") },
  { href: getTranslatedPath("/#galeria", lang), label: t("nav.gallery") },
  { href: getTranslatedPath("/tienda", lang), label: t("nav.store") },
  { href: getTranslatedPath("/programacion", lang), label: t("nav.tour") },
  { href: getTranslatedPath("/#aliados", lang), label: t("nav.allies") },
];
---

<footer class="footer py-16 text-white">
  <div class="container">
    <div
      class="footer-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 mb-12 items-start"
    >
      <!-- Brand Column -->
      <div class="footer-brand">
        <Image
          src={afroinLogo}
          alt="AFRO IN"
          class="footer-logo h-16 w-auto brightness-0 invert"
        />
        <p class="footer-tagline mt-4 text-white/70 leading-relaxed max-w-sm">
          {t("footer.tagline")}
        </p>
      </div>

      <!-- Quick Links -->
      <div class="footer-links flex flex-col items-center md:items-start">
        <h4 class="text-lg mb-6 text-(--color-primary)">
          {t("footer.links.title")}
        </h4>
        <ul class="list-none space-y-2">
          {
            quickLinks.map((link) => (
              <li>
                <a
                  href={link.href}
                  class="text-white/70 hover:text-(--color-primary) transition-colors"
                >
                  {link.label}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- Social Networks -->
      <div class="footer-social">
        <h4 class="text-lg mb-6 text-(--color-primary)">
          {t("footer.social.title")}
        </h4>
        <p class="text-white/70 mb-6 text-sm">
          {t("footer.social.desc")}
        </p>
        <div class="social-links flex gap-4">
          <a
            href="https://www.instagram.com/afro_in/"
            class="social-link w-11 h-11 rounded-full flex items-center justify-center bg-white/10 text-white transition-all duration-300 hover:bg-(--color-primary) hover:-translate-y-0.5"
            aria-label="Instagram"
            target="_blank"
            rel="noopener"
          >
            <Instagram size={20} />
          </a>
          <a
            href="https://www.facebook.com/afroin/"
            class="social-link w-11 h-11 rounded-full flex items-center justify-center bg-white/10 text-white transition-all duration-300 hover:bg-(--color-primary) hover:-translate-y-0.5"
            aria-label="Facebook"
            target="_blank"
            rel="noopener"
          >
            <Facebook size={20} />
          </a>
          <a
            href="https://www.youtube.com/@afroin5816"
            class="social-link w-11 h-11 rounded-full flex items-center justify-center bg-white/10 text-white transition-all duration-300 hover:bg-(--color-primary) hover:-translate-y-0.5"
            aria-label="YouTube"
            target="_blank"
            rel="noopener"
          >
            <Youtube size={20} />
          </a>
        </div>
      </div>
    </div>

    <div
      class="footer-bottom w-full flex flex-col md:flex-row justify-between items-center border-t border-white/10 text-white/40 text-sm gap-8 md:gap-4"
      style="padding-top: 4rem;"
    >
      <!-- Developer Column (Left on Desktop, Bottom on Mobile) -->
      <div
        class="developer-section flex flex-col items-center md:items-start text-center md:text-left gap-2 order-2 md:order-1"
      >
        <span class="text-[10px] text-white/50 font-light tracking-wide"
          >{t("footer.dev")}</span
        >
        <a
          href="https://tayrosoft.com"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:opacity-80 transition-opacity"
          aria-label="Tayrosoft"
        >
          <img
            src="/img/tayrosoft-logo-white.svg"
            alt="Tayrosoft"
            width="120"
            height="24"
            class="w-32 h-auto opacity-90"
          />
        </a>
      </div>

      <!-- Legal Column (Right on Desktop, Top on Mobile) -->
      <div
        class="legal-section flex flex-col items-center md:items-end text-center md:text-right gap-1 order-1 md:order-2"
      >
        <div class="legal-links mb-1">
          <span class="text-white/60">{t("footer.legal.docs")}</span>
          <span class="mx-2 text-white/30">|</span>
          <span class="text-white/60">{t("footer.legal.privacy")}</span>
        </div>
        <p class="text-[10px] text-white/40">
          {t("footer.rights").replace("{year}", currentYear.toString())}
        </p>
      </div>
    </div>
  </div>
</footer>

<style>
  .footer {
    background: var(--gradient-dark);
    color: var(--color-white);
    padding: var(--space-xl) 0 var(--space-lg);
  }

  .footer-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-xl);
    padding: 0 var(--space-md);
    margin-bottom: var(--space-xl);
  }

  /* Brand Column */
  .footer-brand .footer-logo {
    height: 60px;
    width: auto;
    filter: brightness(0) invert(1);
  }

  .footer-tagline {
    margin-top: var(--space-md);
    color: rgba(255, 255, 255, 0.7);
    line-height: 1.6;
  }

  .social-links {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-lg);
  }

  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border-radius: var(--radius-full);
    background: rgba(255, 255, 255, 0.1);
    color: var(--color-white);
    transition: all var(--transition-normal);
  }

  .social-link:hover {
    background: var(--color-primary);
    transform: translateY(-2px);
  }

  /* Links */
  .footer-links h4 {
    font-size: 1.1rem;
    margin-bottom: var(--space-lg);
    color: var(--color-primary);
  }

  .footer-links ul {
    list-style: none;
  }

  .footer-links li {
    margin-bottom: var(--space-sm);
  }

  .footer-links a {
    color: rgba(255, 255, 255, 0.7);
    transition: color var(--transition-fast);
  }

  .footer-links a:hover {
    color: var(--color-primary);
  }

  /* Newsletter */
  .footer-newsletter h4 {
    font-size: 1.1rem;
    margin-bottom: var(--space-lg);
    color: var(--color-primary);
  }

  .form-input {
    width: 100%;
    padding: 10px 15px;
    border-radius: var(--radius-md);
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.05);
    color: var(--color-white);
    font-family: inherit;
    font-size: 0.9rem;
    transition: all var(--transition-fast);
  }

  .form-input:focus {
    outline: none;
    border-color: var(--color-primary);
    background: rgba(255, 255, 255, 0.1);
  }

  .form-input::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }

  /* Responsive */
  @media (max-width: 968px) {
    .footer-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 600px) {
    .footer-grid {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .social-links {
      justify-content: center;
    }

    .newsletter-form {
      flex-direction: column;
    }

    .footer-bottom {
      flex-direction: column-reverse; /* Developer section on bottom, Legal on top */
      gap: var(--space-xl);
      padding-bottom: 90px;
    }

    .developer-section,
    .legal-section {
      width: 100%;
      align-items: center;
      text-align: center;
    }
  }
</style>
