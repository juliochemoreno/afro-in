---
import { Image } from "astro:assets";
import { Instagram, Facebook, Youtube } from "lucide-astro";

// Import real images from assets - Historical and Location focus
import img2 from "@/assets/img/palenque/palenque-1.jpg";
import img3 from "@/assets/img/2014/2014-afroin-img-3.jpg";
import img4 from "@/assets/img/palenque/palenque-2.jpg";
import img5 from "@/assets/img/2014/2014-afroin-img-5.jpg";
import img6 from "@/assets/img/palenque/palenque-3.jpg";
import img8 from "@/assets/img/palenque/palenque-4.jpg";
import img9 from "@/assets/img/2014/2014-afroin-img-9.jpg";
import img11 from "@/assets/img/2014/2014-afroin-img-11.jpg";
import img12 from "@/assets/img/palenque/palenque-6.jpg";
// @ts-ignore
import plk1 from "@/assets/img/afro-in-palenque-1/DSC_0274.JPG";
// @ts-ignore
import plk2 from "@/assets/img/afro-in-palenque-1/DSC_0542.JPG";
// @ts-ignore
import plk3 from "@/assets/img/afro-in-palenque-1/DSC_0518.JPG";

const galleryItems = [
  { id: 2, title: "Palenque Ancestral", category: "lugar", image: img2 },
  { id: 3, title: "Inicios del Tour", category: "historico", image: img3 },
  { id: 4, title: "Cultura en las Calles", category: "lugar", image: img4 },
  { id: 13, title: "Palenque Vivo", category: "comunidad", image: plk1 },
  {
    id: 5,
    title: "Edición 2014 - Santa Marta",
    category: "historico",
    image: img5,
  },
  { id: 6, title: "Tierra de Libertad", category: "lugar", image: img6 },
  { id: 8, title: "Esencia de San Basilio", category: "lugar", image: img8 },
  { id: 14, title: "Tradición Cultural", category: "danza", image: plk2 },
  { id: 9, title: "Cultura Viva 2014", category: "historico", image: img9 },
  { id: 11, title: "Legado Afro In", category: "historico", image: img11 },
  { id: 12, title: "Pueblo Patrimonio", category: "lugar", image: img12 },
  { id: 15, title: "Alegría del Pueblo", category: "comunidad", image: plk3 },
];

const categories = [
  "todos",
  "festival",
  "danza",
  "artistas",
  "moda",
  "musica",
  "comunidad",
];
---

<section class="gallery section" id="galeria">
  <div class="container">
    <div
      class="gallery-header text-center animate-fade-in-up"
      style="animation-delay: 0.1s"
    >
      <span class="section-badge">Nuestras Ediciones</span>
      <h2 class="section-title">Galería AFRO IN</h2>
      <p class="section-subtitle">
        10 años celebrando la cultura afro-colombiana en Santa Marta y Palenque.
      </p>
    </div>

    <div class="gallery-filters">
      {
        categories.map((cat, index) => (
          <button
            class={`filter-btn ${index === 0 ? "active" : ""}`}
            data-filter={cat}
          >
            {cat.charAt(0).toUpperCase() + cat.slice(1)}
          </button>
        ))
      }
    </div>

    <div class="gallery-grid animate-fade-in-up" style="animation-delay: 0.3s">
      {
        galleryItems.map((item) => (
          <div class="gallery-item">
            <Image
              src={item.image}
              alt={item.title}
              class="gallery-img"
              width={800}
              height={600}
              format="webp"
            />
          </div>
        ))
      }
    </div>

    <div class="gallery-cta text-center">
      <p>¿Quieres ver más? Síguenos en nuestras redes sociales.</p>
      <div class="gallery-social flex justify-center gap-4">
        <a
          href="https://instagram.com/afroin"
          class="social-icon-link"
          target="_blank"
          aria-label="Instagram"
        >
          <Instagram size={24} />
        </a>
        <a
          href="https://facebook.com/afroin"
          class="social-icon-link"
          target="_blank"
          aria-label="Facebook"
        >
          <Facebook size={24} />
        </a>
        <a
          href="https://www.youtube.com/@afroin5816"
          class="social-icon-link"
          target="_blank"
          aria-label="YouTube"
        >
          <Youtube size={24} />
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  .gallery {
    background: var(--color-cream);
  }

  /* ... Estilos anteriores ... */

  .social-icon-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--color-white);
    color: var(--color-primary);
    border: 1px solid rgba(227, 28, 37, 0.2);
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  }

  .social-icon-link:hover {
    background: var(--color-primary);
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(227, 28, 37, 0.2);
  }

  .section-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-md);
    background: rgba(227, 28, 37, 0.1);
    border-radius: var(--radius-full);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--color-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--space-md);
  }

  .section-title {
    font-size: clamp(2rem, 5vw, 3rem);
    color: var(--color-secondary);
    margin-bottom: var(--space-md);
  }

  .section-subtitle {
    font-size: 1.2rem;
    color: var(--color-text-light);
    max-width: 600px;
    margin: 0 auto var(--space-xl);
  }

  .gallery-filters {
    display: none;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-bottom: var(--space-xl);
  }

  .filter-btn {
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-full);
    font-family: var(--font-body);
    font-weight: 500;
    font-size: 0.9rem;
    color: var(--color-text-light);
    background: var(--color-white);
    border: 1px solid transparent;
    transition: all var(--transition-normal);
  }

  .filter-btn:hover {
    color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .filter-btn.active {
    background: var(--color-primary);
    color: var(--color-white);
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
  }

  @media (min-width: 1024px) {
    .gallery-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .gallery-item {
    position: relative;
    aspect-ratio: 4/3;
    border-radius: var(--radius-lg);
    overflow: hidden;
  }

  .gallery-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .gallery-cta {
    padding-top: var(--space-xl);
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .gallery-cta p {
    color: var(--color-text-light);
    margin-bottom: var(--space-md);
  }

  .gallery-social {
    display: flex;
    justify-content: center;
    gap: var(--space-md);
  }

  @media (max-width: 968px) {
    .gallery-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 600px) {
    .gallery-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2px;
    }

    .gallery-item {
      border-radius: 0;
      aspect-ratio: 1;
    }

    /* Adjust placeholder size for smaller boxes */
    .gallery-placeholder {
      font-size: 2rem;
    }

    .gallery-social {
      /* flex-direction: column; removido para mantener fila horizontal */
      align-items: center;
    }
  }
</style>

<script>
  const filterBtns = document.querySelectorAll(".filter-btn");
  const galleryItems = document.querySelectorAll(".gallery-item");

  filterBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      // Update active button
      filterBtns.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");

      // Filter items
      const filter = (btn as HTMLElement).dataset.filter;
      galleryItems.forEach((item) => {
        if (
          filter === "todos" ||
          (item as HTMLElement).dataset.category === filter
        ) {
          (item as HTMLElement).style.display = "block";
        } else {
          (item as HTMLElement).style.display = "none";
        }
      });
    });
  });
</script>
